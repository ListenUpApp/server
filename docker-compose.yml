services:
  listenup:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    volumes:
      # Mount your audiobook library (read-only for safety)
      - ${AUDIOBOOK_PATH:-~/Audiobooks}:/data/audiobooks:ro
      # Mount metadata directory for persistence
      - listenup-metadata:/data/metadata
      # Mount transcode cache for persistence
      - listenup-cache:/data/cache
    environment:
      - ENV=production
      - LOG_LEVEL=info
      - SERVER_NAME=${SERVER_NAME:-ListenUp Server}
      - SERVER_PORT=8080
      - ADVERTISE_MDNS=true
      # Transcode settings
      - TRANSCODE_ENABLED=true
      - TRANSCODE_MAX_CONCURRENT=2
    restart: unless-stopped

volumes:
  listenup-metadata:
  listenup-cache:
